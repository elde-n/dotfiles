#!/usr/bin/env luajit

local command = require "modules/command"

local function get_pid(process)
	return command.new("pidof"):arg(process):run().output
end

while true do
	if not get_pid("waybar") then
		local _, err = command.new("hyprctl")
			:arg("dispatch")
			:arg("--", "exec")
			:arg("LANG=C", "waybar")
			:run()
		if err then break end
	end

	os.execute("sleep 1")
end
